<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8">
  <title>Poissons</title>
</head>

<body>

  <div id="container">
    <h1 id="title">Poisson</h1>
  </div>

  <script type="module">

    import * as THREE from './node_modules/three/build/three.module.js';
    import { OrbitControls } from './vendor_mods/three/examples/jsm/controls/OrbitControls.js';
    import { GLTFLoader } from './vendor_mods/three/examples/jsm/loaders/GLTFLoader.js';


    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xFFFFFF);
    var camera = new THREE.PerspectiveCamera(
      /*fov*/ 75,
      /*aspect ratio*/ window.innerWidth / (window.innerHeight*70/100),
      /*near*/ 0.1,
      /*far*/ 1000
    );
    camera.position.z = 5;
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight*70/100);
    document.body.appendChild(renderer.domElement);
    
    var loader = new GLTFLoader();

   
    // Charge l'objet poisson en 3D à la taille demandée
    function loadObject(size, nomPoisson, x, y, z){
         loader.load('./3dobjects/'+ nomPoisson, function (gltf)
      {
          let poisson = gltf.scene;

          poisson.scale.set(size,size,size);
          poisson.position.set(x,y,z);
          
          scene.add(poisson);
          
      }, undefined, function (error) {
        console.error(error);
      });

        
    }

    function selectFish(size, color){
      if(color=="red"){
        loadObject(size, "poisson2.glb");
      }

      else if(color=="yellow"){
        loadObject(size, "poisson3.glb");
      }

      else{
        loadObject(size, "poisson.glb");
      }
    }

    // CONTROLE
    
    var controls = new OrbitControls(camera, renderer.domElement);

    // LUMIERE

    const pointLight = new THREE.PointLight(0x00ff00, 2, 50);
    const directionalLight = new THREE.DirectionalLight(0xffffff);
    const ambientLight = new THREE.AmbientLight(0x111111);
    scene.add(ambientLight);
    scene.add(pointLight);
    scene.add(directionalLight);

    // ANIMATION

    function animate() {
      
      requestAnimationFrame(animate);

      // Ici, le code de l'animation
      
      renderer.render(scene, camera);
    }

    selectFish(5, "blue");
    animate();

  </script>

</body>

</html>